<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      lang="es">

<h:head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>Editar Envío - Romar Natural</title>

    <!-- Bootstrap, Iconos y fuentes -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" />
    <link href="https://unpkg.com/ionicons@4.5.10-0/dist/css/ionicons.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,300;1,300&amp;display=swap" rel="stylesheet" />

    <!-- Estilos personalizados -->
    <link rel="stylesheet" href="#{request.contextPath}/resources/css/style.css" />
</h:head>

<h:body>

    <div class="d-flex" style="min-height: 100vh;">
        <!-- SIDEBAR -->
        <div id="sidebar-container" class="bg-primary text-light">
            <!-- Logo con padding y centrado -->
            <div class="logo p-3">
                <h4 class="text-light font-weight-bold text-center mb-0">Romar Natural</h4>
            </div>
            <!-- Menú con margen superior -->
            <div class="menu mt-4">
                <h:link outcome="/operario.xhtml" styleClass="d-block text-light p-3 active">
                    <i class="icon ion-md-apps mr-2 lead"></i>Dashboard
                </h:link>

                <h:link outcome="/proveedor/indexoperario.xhtml" styleClass="d-block text-light p-3">
                    <i class="icon ion-md-cube mr-2 lead"></i>Proveedores
                </h:link>

                <h:link outcome="/ventas/listarVentasoperario.xhtml" styleClass="d-block text-light p-3">
                    <i class="icon ion-md-cart mr-2 lead"></i>Ventas
                </h:link>

                <h:link outcome="/producto/indexoperario.xhtml" styleClass="d-block text-light p-3">
                    <i class="icon ion-md-folder mr-2 lead"></i>Productos
                </h:link>

                <h:link outcome="/mensajeria/listarMensajeriaoperario" styleClass="d-block text-light p-3">
                    <i class="icon ion-md-paper-plane mr-2 lead"></i>Mensajería
                </h:link>

                <h:link outcome="/envios/listarEnviosoperario" styleClass="d-block text-light p-3">
                    <i class="icon ion-md-send mr-2 lead"></i>Envíos
                </h:link>
            </div>
        </div>

        <!-- CONTENIDO PRINCIPAL -->
        <div class="flex-grow-1">
            <!-- NAVBAR -->
            <nav class="navbar navbar-expand-lg navbar-light bg-white border-bottom shadow-sm">
                <div class="container-fluid">
                    <span class="navbar-brand font-weight-bold text-success">Panel de Operario</span>

                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">Operario</a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <h:form>
                                    <p:commandButton value="Cerrar Sesión"
                                                     action="#{usuariosBean.cerrarSesion}"
                                                     ajax="false"
                                                     styleClass="dropdown-item text-danger"
                                                     icon="pi pi-sign-out" />
                                </h:form>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- FORMULARIO EDITAR ENVÍO -->
            <div class="container my-5">
                <div class="card shadow-sm border-0">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0"><i class="icon ion-md-create mr-2"></i>Editar Envío</h5>
                    </div>

                    <div class="card-body">
                        <h:form id="formEditarEnvio">

                            <!-- ID oculto -->
                            <h:inputHidden value="#{enviosBean.envio.idenvio}" />

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <h:outputLabel for="estado" value="Estado del Envío:" />
                                    <p:selectOneMenu id="estado"
                                                     value="#{enviosBean.envio.estado_envio}"
                                                     required="true"
                                                     styleClass="form-control">
                                        <f:selectItem itemLabel="Seleccione un estado" itemValue="" noSelectionOption="true"/>
                                        <f:selectItem itemLabel="Entregado" itemValue="Entregado"/>
                                        <f:selectItem itemLabel="En reparto" itemValue="En reparto"/>
                                        <f:selectItem itemLabel="Sin entregar" itemValue="Sin entregar"/>
                                    </p:selectOneMenu>
                                </div>

                                <div class="form-group col-md-3">
                                    <h:outputLabel for="fechaEnvio" value="Fecha de Envío:" />
                                    <p:calendar id="fechaEnvio"
                                                value="#{enviosBean.envio.fecha_envio}"
                                                pattern="yyyy-MM-dd"
                                                required="true"
                                                styleClass="form-control" />
                                </div>

                                <div class="form-group col-md-3">
                                    <h:outputLabel for="fechaEntrega" value="Fecha de Entrega:" />
                                    <p:calendar id="fechaEntrega"
                                                value="#{enviosBean.envio.fecha_entrega}"
                                                pattern="yyyy-MM-dd"
                                                styleClass="form-control" />
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <h:outputLabel for="dirSalida" value="Dirección de Salida:" />
                                    <p:inputText id="dirSalida"
                                                 value="#{enviosBean.envio.direccion_salida}"
                                                 required="true"
                                                 styleClass="form-control" />
                                </div>

                                <div class="form-group col-md-6">
                                    <h:outputLabel for="dirEntrega" value="Dirección de Entrega:" />
                                    <p:inputText id="dirEntrega"
                                                 value="#{enviosBean.envio.direccion_envio}"
                                                 required="true"
                                                 styleClass="form-control" />
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group col-md-6">
                                    <h:outputLabel for="obs" value="Observaciones:" />
                                    <p:inputTextarea id="obs"
                                                     value="#{enviosBean.envio.observaciones}"
                                                     rows="3"
                                                     styleClass="form-control" />
                                </div>

                                <div class="form-group col-md-6">
                                    <h:outputLabel for="novedad" value="Novedades:" />
                                    <p:inputTextarea id="novedad"
                                                     value="#{enviosBean.envio.novedades}"
                                                     rows="3"
                                                     styleClass="form-control" />
                                </div>
                            </div>

                            <div class="form-group col-md-6">
                                <h:outputLabel for="mensajeria" value="Mensajería:" />
                                <p:selectOneMenu id="mensajeria"
                                                 value="#{enviosBean.envio.fk_mensajeria}"
                                                 required="true"
                                                 styleClass="form-control">
                                    <f:selectItem itemLabel="Seleccione una mensajería" itemValue="" noSelectionOption="true"/>
                                    <f:selectItems value="#{enviosBean.listaMensajerias}"
                                                   var="m"
                                                   itemLabel="#{m.nombre_mensajeria}"
                                                   itemValue="#{m.idmensajeria}" />
                                </p:selectOneMenu>
                            </div>

                            <div class="text-center mt-4">
                                <p:commandButton value="Actualizar"
                                                 icon=""
                                                 action="#{enviosBean.actualizarEnviooperario}"
                                                 ajax="false"
                                                 styleClass="btn btn-success px-5 mr-2" />
                                <p:commandButton value="Volver"
                                                 icon=""
                                                 action="#{enviosBean.volverListadooperario}"
                                                 ajax="false"
                                                 immediate="true"
                                                 styleClass="btn btn-secondary px-5" />
                            </div>
                        </h:form>
                    </div>
                </div>
            </div>

        </div> <!-- fin contenido -->
    </div> <!-- fin d-flex -->

    <!-- SCRIPTS -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
</h:body>
</html>
